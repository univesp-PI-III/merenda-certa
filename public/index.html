<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Merenda Certa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&family=Sora:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-a"></div>
    <div class="bg-shape bg-shape-b"></div>

    <header class="hero">
      <div class="hero-content">
        <span class="hero-badge">DRP01-Projeto Integrador em Computação III-Turma 004</span>
        <h1>Merenda Certa</h1>
        <p>Gestão de estoque e controle térmico da merenda escolar com rastreabilidade.</p>
      </div>
      <div class="hero-media">
        <img
          src="https://images.unsplash.com/photo-1488459716781-31db52582fe9?auto=format&fit=crop&w=1200&q=80"
          alt="Bandejas de alimentos preparados"
          loading="lazy"
        />
      </div>
    </header>

    <section class="quick-cards">
      <a class="quick-card quick-card-link" href="#products" data-go-tab="products">
        <h3>Controle de Insumos</h3>
        <p>Acompanhe entradas e saídas em tempo real para reduzir desperdício.</p>
      </a>
      <a class="quick-card quick-card-link" href="#temperature" data-go-tab="temperature">
        <h3>Segurança Alimentar</h3>
        <p>Monitore leituras dos medidores via MQTT e identifique pontos de alerta.</p>
      </a>
      <a class="quick-card quick-card-link" href="#about" data-go-tab="about">
        <h3>Sobre</h3>
        <p>Veja os integrantes, orientadora e informações do Projeto Integrador.</p>
      </a>
      <article class="quick-card quick-card-image">
        <img
          src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=900&q=80"
          alt="Prato com refeição escolar"
          loading="lazy"
        />
      </article>
    </section>

    <nav class="tabs">
      <button data-tab="dashboard" class="active">Painel</button>
      <button data-tab="products">Produtos</button>
      <button data-tab="movements">Movimentações</button>
      <button data-tab="temperature">Temperatura</button>
      <button data-tab="about">Sobre</button>
    </nav>

    <main>
      <section id="dashboard" class="tab active panel">
        <div class="section-head">
          <h2>Indicadores gerais</h2>
          <p>Resumo operacional da cozinha escolar.</p>
        </div>
        <div id="kpis" class="kpis"></div>
        <div class="section-head">
          <h2>Ações recomendadas</h2>
          <p>Pontos de decisão para consumo, reposição e segurança térmica.</p>
        </div>
        <div id="decision-panels" class="decision-grid"></div>
      </section>

      <section id="products" class="tab panel">
        <div class="section-head">
          <h2>Cadastro de produtos</h2>
          <p>Cadastre produtos base e depois registre entradas por lote com validade.</p>
        </div>
        <div class="charts-grid">
          <article class="chart-card">
            <h3>Evolução do estoque ao longo do tempo</h3>
            <div class="chart-canvas-wrap">
              <canvas id="stock-timeline-chart" aria-label="Grafico de estoque no tempo"></canvas>
            </div>
          </article>
          <article class="chart-card">
            <h3>Produtos vencidos ao longo do tempo</h3>
            <div class="chart-canvas-wrap">
              <canvas id="expired-timeline-chart" aria-label="Grafico de vencimentos no tempo"></canvas>
            </div>
          </article>
        </div>
        <form id="product-form" class="card form-grid">
          <label>Nome do produto <input name="name" required /></label>
          <label>Unidade <input name="unit" value="kg" required /></label>
          <label>Estoque mínimo <input type="number" step="0.01" name="minStock" value="0" /></label>
          <button type="submit">Salvar produto</button>
        </form>
        <form id="entry-form" class="card form-grid">
          <label>Produto
            <select name="productId" id="entry-product" required></select>
          </label>
          <label>Quantidade <input type="number" step="0.01" name="quantity" required /></label>
          <label>Validade do lote <input type="date" name="expirationDate" required /></label>
          <label>Data da entrada <input type="datetime-local" name="receivedAt" /></label>
          <button type="submit">Registrar entrada de lote</button>
        </form>
        <div class="table-wrap">
          <table id="products-table">
            <thead>
              <tr>
                <th>Produto</th>
                <th>Saldo</th>
                <th>Mínimo</th>
                <th>Próx validade</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="table-wrap">
          <table id="entries-table">
            <thead>
              <tr>
                <th>Entrada</th>
                <th>Produto</th>
                <th>Qtd lote</th>
                <th>Disponivel</th>
                <th>Validade</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="movements" class="tab panel">
        <div class="section-head">
          <h2>Registro de movimentação</h2>
          <p>Registre saídas para manter o saldo dos lotes atualizado.</p>
        </div>
        <form id="movement-form" class="card form-grid">
          <label>Produto
            <select name="productId" id="movement-product" required></select>
          </label>
          <label>Tipo
            <select name="type" required>
              <option value="OUT">Saída</option>
            </select>
          </label>
          <label>Quantidade <input type="number" step="0.01" name="quantity" required /></label>
          <label>Observação <input name="notes" /></label>
          <button type="submit">Registrar movimentação</button>
        </form>
        <div class="table-wrap">
          <table id="movements-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Produto</th>
                <th>Tipo</th>
                <th>Qtd</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="temperature" class="tab panel">
        <div class="section-head">
          <h2>Monitoramento por medidores</h2>
          <p>Cada medidor possui faixa mínima/máxima e envia leituras por MQTT.</p>
        </div>
        <div id="temperature-alert-dashboard" class="card temp-dashboard">
          <div class="temp-group temp-live">
            <div id="temperature-live-meters" class="temp-live-grid"></div>
          </div>
          <div class="temp-group">
            <div id="temperature-kpis" class="kpis"></div>
          </div>
          <div class="temp-group temp-alert-foods">
            <ul id="temperature-alert-foods-list"></ul>
          </div>
          <p class="mqtt-hint">
            Tópico MQTT por medidor: <code>merenda/temperatura/{meterCode}/leitura</code>
          </p>
        </div>

        <form id="meter-form" class="card form-grid">
          <label>Nome do medidor <input name="name" required /></label>
          <label>Código MQTT <input name="meterCode" placeholder="medidor-5" required /></label>
          <label>Temperatura mínima (C) <input type="number" step="0.1" name="minTemp" required /></label>
          <label>Temperatura máxima (C) <input type="number" step="0.1" name="maxTemp" required /></label>
          <button type="submit">Cadastrar medidor</button>
        </form>

        <div class="table-wrap">
          <table id="meters-table">
            <thead>
              <tr>
                <th>Medidor</th>
                <th>Código</th>
                <th>Faixa (C)</th>
                <th>Última leitura</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="table-wrap">
          <table id="temperature-readings-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Medidor</th>
                <th>Temp</th>
                <th>Status</th>
                <th>Origem</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="about" class="tab panel">
        <div class="section-head">
          <h2>Sobre</h2>
          <p>Informações do Projeto Integrador.</p>
        </div>
        <article class="card about-hero-card">
          <div>
            <span class="about-badge">UNIVESP | DRP01</span>
            <h3>Projeto Integrador em Computação III - Turma 004</h3>
            <p>Sistema de apoio à operação da merenda escolar com controle de lotes, validades e monitoramento de temperatura.</p>
            <a
              class="about-link"
              href="https://assets.univesp.br/blackboard/plano-de-ensino/disciplinas/PJI310.html"
              target="_blank"
              rel="noopener noreferrer"
            >
              Projeto Integrador em Computação III
            </a>
          </div>
          <img
            src="https://univesp.br/sites/58f6506869226e9479d38201/theme/images/logo-univesp.png?1746625787"
            alt="Logo da Univesp"
            class="univesp-logo"
            loading="lazy"
          />
        </article>

        <div class="about-grid">
          <article class="card about-card">
            <h3>Orientadora</h3>
            <p class="about-lead">Veridiana Souza da Silva Alves</p>
          </article>

          <article class="card about-card">
            <h3>Integrantes</h3>
            <ul class="about-members">
              <li><span>ALAN BREGANTIN DA SILVA JUNIOR</span><small>23203345</small></li>
              <li><span>DENISE NOBRE DA SILVA</span><small>23207710</small></li>
              <li><span>GUSTAVO MITSURO CARVALHO YAMASHITA</span><small>-</small></li>
              <li><span>LUIZ HENRIQUE BENTO LESSA</span><small>23209647</small></li>
              <li><span>LUIZ CARLOS TADASHI KUWABARA</span><small>2214308</small></li>
            </ul>
          </article>
        </div>
      </section>
    </main>

    <div id="toast" class="toast hidden"></div>
    <script src="/vendor/chart/chart.umd.min.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
